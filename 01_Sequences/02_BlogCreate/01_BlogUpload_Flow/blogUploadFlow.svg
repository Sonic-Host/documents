<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="716px" preserveAspectRatio="none" style="width:1022px;height:716px;background:#FFFFFF;" version="1.1" viewBox="0 0 1022 716" width="1022px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="135" x="442.5" y="27.9951">ブログアップロード</text><rect fill="#FFFFFF" height="476.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="278" y="149.7266"/><rect fill="#FFFFFF" height="57.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="586" y="298.3906"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="734.5" y="384.6563"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="953.5" y="312.3906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="118.5938" y2="635.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="282.5" x2="282.5" y1="118.5938" y2="635.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="488.5" x2="488.5" y1="118.5938" y2="635.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="590.5" x2="590.5" y1="118.5938" y2="635.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="739.5" x2="739.5" y1="118.5938" y2="635.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="958" x2="958" y1="118.5938" y2="635.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="115.292">ユーザ</text><ellipse cx="29" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M29,58.7969 L29,85.7969 M16,66.7969 L42,66.7969 M29,85.7969 L16,100.7969 M29,85.7969 L42,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="647.5811">ユーザ</text><ellipse cx="29" cy="659.3828" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M29,667.3828 L29,694.3828 M16,675.3828 L42,675.3828 M29,694.3828 L16,709.3828 M29,694.3828 L42,709.3828 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="219.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="227" y="90.9951">クライアント端末</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="226.5" y="107.292">(PCまたはスマホ)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="219.5" y="634.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="227" y="654.5811">クライアント端末</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="226.5" y="670.8779">(PCまたはスマホ)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="448.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="461" y="90.9951">認証基盤</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="455.5" y="107.292">(Cognito)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="448.5" y="634.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="461" y="654.5811">認証基盤</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="455.5" y="670.8779">(Cognito)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="539.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="575.5" y="90.9951">CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="546.5" y="107.292">(CloudFront)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="539.5" y="634.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="575.5" y="654.5811">CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="546.5" y="670.8779">(CloudFront)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174" x="652.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="659.5" y="90.9951">WordPress管理バケット</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="725.5" y="107.292">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="174" x="652.5" y="634.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="160" x="659.5" y="654.5811">WordPress管理バケット</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="725.5" y="670.8779">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="901" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="909" y="90.9951">SonicHost API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="908" y="107.292">(API-Gateway)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="901" y="634.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="909" y="654.5811">SonicHost API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="908" y="670.8779">(API-Gateway)</text><rect fill="#FFFFFF" height="476.8594" style="stroke:#181818;stroke-width:1.0;" width="10" x="278" y="149.7266"/><rect fill="#FFFFFF" height="57.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="586" y="298.3906"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="734.5" y="384.6563"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="953.5" y="312.3906"/><polygon fill="#181818" points="266,145.7266,276,149.7266,266,153.7266,270,149.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="272" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="36" y="144.6606">HOME画面を起動</text><rect fill="#ADFF2F" height="23" style="stroke:#181818;stroke-width:0.5;" width="138" x="293" y="162.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="297" y="178.7935">ログインフローを参照</text><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="330" y1="211.9922" y2="211.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="330" x2="330" y1="211.9922" y2="224.9922"/><line style="stroke:#181818;stroke-width:1.0;" x1="289" x2="330" y1="224.9922" y2="224.9922"/><polygon fill="#181818" points="299,220.9922,289,224.9922,299,228.9922,295,224.9922" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="295" y="206.9263">HOME画面を表示</text><polygon fill="#181818" points="266,265.2578,276,269.2578,266,273.2578,270,269.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="272" y1="269.2578" y2="269.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225" x="36" y="249.0591">ドラッグ＆ドロップ　or ファイル選択</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181" x="40" y="264.1919">WordPressのBackUpファイル</text><polygon fill="#181818" points="574,294.3906,584,298.3906,574,302.3906,578,298.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="580" y1="298.3906" y2="298.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="295" y="293.3247">アップロード用一時認証取得API</text><polygon fill="#181818" points="941.5,308.3906,951.5,312.3906,941.5,316.3906,945.5,312.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="596" x2="947.5" y1="312.3906" y2="312.3906"/><polygon fill="#181818" points="607,322.3906,597,326.3906,607,330.3906,603,326.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="601" x2="957.5" y1="326.3906" y2="326.3906"/><polygon fill="#181818" points="299,351.5234,289,355.5234,299,359.5234,295,355.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="293" x2="590" y1="355.5234" y2="355.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="305" y="350.4575">STS取得</text><polygon fill="#181818" points="722.5,380.6563,732.5,384.6563,722.5,388.6563,726.5,384.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="728.5" y1="384.6563" y2="384.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="303" x="295" y="379.5903">WordPressのバックアップファイルをアップロード</text><line style="stroke:#181818;stroke-width:1.0;" x1="744.5" x2="786.5" y1="428.9219" y2="428.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="786.5" x2="786.5" y1="428.9219" y2="441.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="745.5" x2="786.5" y1="441.9219" y2="441.9219"/><polygon fill="#181818" points="755.5,437.9219,745.5,441.9219,755.5,445.9219,751.5,441.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="751.5" y="408.7231">資材保管</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="751.5" y="423.856">サイトドメインごとにキーを設定</text><polygon fill="#181818" points="299,451.9219,289,455.9219,299,459.9219,295,455.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="293" x2="738.5" y1="455.9219" y2="455.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="330" y1="485.0547" y2="485.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="330" x2="330" y1="485.0547" y2="498.0547"/><line style="stroke:#181818;stroke-width:1.0;" x1="289" x2="330" y1="498.0547" y2="498.0547"/><polygon fill="#181818" points="299,494.0547,289,498.0547,299,502.0547,295,498.0547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="295" y="479.9888">アップロード完了モーダル表示</text><polygon fill="#181818" points="266,523.1875,276,527.1875,266,531.1875,270,527.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="272" y1="527.1875" y2="527.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="36" y="522.1216">「OK」押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="288" x2="330" y1="556.3203" y2="556.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="330" x2="330" y1="556.3203" y2="569.3203"/><line style="stroke:#181818;stroke-width:1.0;" x1="289" x2="330" y1="569.3203" y2="569.3203"/><polygon fill="#181818" points="299,565.3203,289,569.3203,299,573.3203,295,569.3203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="295" y="551.2544">モーダル閉じる</text><rect fill="#ADFF2F" height="38" style="stroke:#181818;stroke-width:0.5;" width="151" x="293" y="582.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="297" y="598.3872">続きのバッチ処理は</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="297" y="613.52">ブログ生成フローを参照</text><!--MD5=[da19ff825424f945a0d3c66153ac1e5d]
@startuml
title ブログアップロード


' アクター定義
actor "ユーザ" as user
participant "クライアント端末\n(PCまたはスマホ)" as device
participant "認証基盤\n(Cognito)" as cognito
participant "CDN\n(CloudFront)" as cdn
participant "WordPress管理バケット\n(S3)" as s3
participant "SonicHost API\n(API-Gateway)" as api

user -> device ++ : HOME画面を起動
rnote right of device #GreenYellow
    ログインフローを参照
end note
device -> device : HOME画面を表示
user -> device : ドラッグ＆ドロップ　or ファイル選択\n WordPressのBackUpファイル
device -> cdn ++ : アップロード用一時認証取得API
cdn -> api ++ 
cdn <- api - -
device <- cdn - - : STS取得
device -> s3 ++ : WordPressのバックアップファイルをアップロード
s3 -> s3 : 資材保管\nサイトドメインごとにキーを設定
device <- s3 - -
device -> device : アップロード完了モーダル表示
user -> device : 「OK」押下
device -> device : モーダル閉じる
rnote right of device #GreenYellow
    続きのバッチ処理は
    ブログ生成フローを参照
end note
@enduml

@startuml
title ブログアップロード


actor "ユーザ" as user
participant "クライアント端末\n(PCまたはスマホ)" as device
participant "認証基盤\n(Cognito)" as cognito
participant "CDN\n(CloudFront)" as cdn
participant "WordPress管理バケット\n(S3)" as s3
participant "SonicHost API\n(API-Gateway)" as api

user -> device ++ : HOME画面を起動
rnote right of device #GreenYellow
    ログインフローを参照
end note
device -> device : HOME画面を表示
user -> device : ドラッグ＆ドロップ　or ファイル選択\n WordPressのBackUpファイル
device -> cdn ++ : アップロード用一時認証取得API
cdn -> api ++ 
cdn <- api - -
device <- cdn - - : STS取得
device -> s3 ++ : WordPressのバックアップファイルをアップロード
s3 -> s3 : 資材保管\nサイトドメインごとにキーを設定
device <- s3 - -
device -> device : アップロード完了モーダル表示
user -> device : 「OK」押下
device -> device : モーダル閉じる
rnote right of device #GreenYellow
    続きのバッチ処理は
    ブログ生成フローを参照
end note
@enduml

PlantUML version 1.2022.14beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>