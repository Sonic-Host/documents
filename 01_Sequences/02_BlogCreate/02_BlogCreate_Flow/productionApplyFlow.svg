<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="320px" preserveAspectRatio="none" style="width:746px;height:320px;background:#FFFFFF;" version="1.1" viewBox="0 0 746 320" width="746px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="60" x="342" y="27.9951">本番適用</text><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="98" y="164.1563"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="304" y="121.0234"/><rect fill="#FFFFFF" height="159.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="468" y="99.8906"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="634.5" y="236.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="103" x2="103" y1="89.8906" y2="268.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="309" x2="309" y1="89.8906" y2="268.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="473" x2="473" y1="89.8906" y2="268.4219"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="639" x2="639" y1="89.8906" y2="268.4219"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="12" y="62.292">配布用静的資材管理バケット</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="89" y="78.5889">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="5" y="267.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="12" y="287.417">配布用静的資材管理バケット</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="89" y="303.7139">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="211" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="218" y="62.292">配布用資材一時管理バケット</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="295" y="78.5889">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="211" y="267.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="218" y="287.417">配布用資材一時管理バケット</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="295" y="303.7139">(S3)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="417" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="424" y="78.5889">バッチサーバー</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="417" y="267.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="424" y="287.417">バッチサーバー</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="539" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="624" y="62.292">CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="546" y="78.5889">(CloudFront or CloudFlare)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="201" x="539" y="267.4219"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="624" y="287.417">CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="187" x="546" y="303.7139">(CloudFront or CloudFlare)</text><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="98" y="164.1563"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="304" y="121.0234"/><rect fill="#FFFFFF" height="159.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="468" y="99.8906"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="634.5" y="236.4219"/><polygon fill="#181818" points="325,117.0234,315,121.0234,325,125.0234,321,121.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="319" x2="467" y1="121.0234" y2="121.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="331" y="115.9575">全資材取得</text><polygon fill="#181818" points="456,131.0234,466,135.0234,456,139.0234,460,135.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="309" x2="462" y1="135.0234" y2="135.0234"/><polygon fill="#181818" points="119,160.1563,109,164.1563,119,168.1563,115,164.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="113" x2="467" y1="164.1563" y2="164.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="125" y="159.0903">取得した資材を保管</text><polygon fill="#181818" points="456,174.1563,466,178.1563,456,182.1563,460,178.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="103" x2="462" y1="178.1563" y2="178.1563"/><polygon fill="#181818" points="320,203.2891,310,207.2891,320,211.2891,316,207.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="314" x2="467" y1="207.2891" y2="207.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="326" y="202.2231">全資材削除</text><polygon fill="#181818" points="622.5,232.4219,632.5,236.4219,622.5,240.4219,626.5,236.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="478" x2="628.5" y1="236.4219" y2="236.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="485" y="231.356">キャッシュクリア</text><polygon fill="#181818" points="489,246.4219,479,250.4219,489,254.4219,485,250.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="483" x2="638.5" y1="250.4219" y2="250.4219"/><!--MD5=[d47ecaf235a3be92b63f6b927cb173b1]
@startuml
title 本番適用


' アクター定義
participant "配布用静的資材管理バケット\n(S3)" as static
participant "配布用資材一時管理バケット\n(S3)" as tmp
participant "バッチサーバー" as batch
participant "CDN\n(CloudFront or CloudFlare)" as cdn

' 本番適用
activate batch
batch -> tmp ++ : 全資材取得
batch <- tmp - -
batch -> static ++ : 取得した資材を保管
batch <- static - -
batch -> tmp : 全資材削除
batch -> cdn ++ : キャッシュクリア
batch <- cdn - -
@enduml

@startuml
title 本番適用


participant "配布用静的資材管理バケット\n(S3)" as static
participant "配布用資材一時管理バケット\n(S3)" as tmp
participant "バッチサーバー" as batch
participant "CDN\n(CloudFront or CloudFlare)" as cdn

activate batch
batch -> tmp ++ : 全資材取得
batch <- tmp - -
batch -> static ++ : 取得した資材を保管
batch <- static - -
batch -> tmp : 全資材削除
batch -> cdn ++ : キャッシュクリア
batch <- cdn - -
@enduml

PlantUML version 1.2022.14beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>