<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="427px" preserveAspectRatio="none" style="width:658px;height:427px;background:#FFFFFF;" version="1.1" viewBox="0 0 658 427" width="658px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="75" x="293.5" y="27.9951">ジョブ登録</text><rect fill="#FFFFFF" height="222.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="196" y="136.1563"/><rect fill="#FFFFFF" height="23" style="stroke:#181818;stroke-width:1.0;" width="10" x="381" y="344.2188"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="517" y="165.2891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="89.8906" y2="376.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="200.5" x2="200.5" y1="89.8906" y2="376.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="386" x2="386" y1="89.8906" y2="376.2188"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="522" x2="522" y1="89.8906" y2="376.2188"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="29" y="62.292">Cron管理</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="12" y="78.5889">(CloudWatch)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="110" x="5" y="375.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62" x="29" y="395.2139">Cron管理</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="96" x="12" y="411.5107">(CloudWatch)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="130.5" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="137.5" y="78.5889">ジョブ設定Lambda</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="141" x="130.5" y="375.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="127" x="137.5" y="395.2139">ジョブ設定Lambda</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="330" y="58.5938"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="337" y="78.5889">バッチサーバー</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="112" x="330" y="375.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="337" y="395.2139">バッチサーバー</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="452" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="459" y="62.292">バッチ設定テーブル</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="487.5" y="78.5889">(Dynamo)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="452" y="375.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="459" y="395.2139">バッチ設定テーブル</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="487.5" y="411.5107">(Dynamo)</text><rect fill="#FFFFFF" height="222.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="196" y="136.1563"/><rect fill="#FFFFFF" height="23" style="stroke:#181818;stroke-width:1.0;" width="10" x="381" y="344.2188"/><rect fill="#FFFFFF" height="71.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="517" y="165.2891"/><polygon fill="#181818" points="184,132.1563,194,136.1563,184,140.1563,188,136.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="60" x2="190" y1="136.1563" y2="136.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="67" y="115.9575">ジョブ実行開始要求</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="67" y="131.0903">(１時間ごと)</text><polygon fill="#181818" points="505,161.2891,515,165.2891,505,169.2891,509,165.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="206" x2="511" y1="165.2891" y2="165.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="213" y="160.2231">実行するべきジョブの取得</text><line style="stroke:#181818;stroke-width:1.0;" x1="527" x2="569" y1="194.4219" y2="194.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="569" x2="569" y1="194.4219" y2="207.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="528" x2="569" y1="207.4219" y2="207.4219"/><polygon fill="#181818" points="538,203.4219,528,207.4219,538,211.4219,534,207.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="534" y="189.356">日時より一覧を検索</text><polygon fill="#181818" points="217,232.5547,207,236.5547,217,240.5547,213,236.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="211" x2="521" y1="236.5547" y2="236.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="223" y="231.4888">実行する一覧を返却</text><rect fill="#FFFF00" height="68" style="stroke:#181818;stroke-width:0.5;" width="190" x="211" y="249.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="215" y="265.6216">１サイト毎に以下の情報を返却</text><ellipse cx="220.5" cy="276.3203" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="227" y="280.7544">サイトドメイン</text><ellipse cx="220.5" cy="291.4531" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="227" y="295.8872">PHPVersion</text><ellipse cx="220.5" cy="306.5859" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="227" y="311.02">WordPressVersion</text><polygon fill="#181818" points="369,340.2188,379,344.2188,369,348.2188,373,344.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="206" x2="375" y1="344.2188" y2="344.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="213" y="339.1528">ジョブ群の起動（非同期）</text><polygon fill="#181818" points="71,354.2188,61,358.2188,71,362.2188,67,358.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65" x2="200" y1="358.2188" y2="358.2188"/><!--MD5=[66caa49322effedf9b116dee86b8dcb7]
@startuml
title ジョブ登録

' アクター定義
participant "Cron管理\n(CloudWatch)" as cron
participant "ジョブ設定Lambda" as jobLambda
participant "バッチサーバー" as batch
participant "バッチ設定テーブル\n(Dynamo)" as batchSeting

' ジョブ群の登録
cron -> jobLambda ++ : ジョブ実行開始要求\n(１時間ごと)
jobLambda  -> batchSeting ++ : 実行するべきジョブの取得
batchSeting -> batchSeting : 日時より一覧を検索
jobLambda <- batchSeting - - : 実行する一覧を返却
rnote right of jobLambda #Yellow
    １サイト毎に以下の情報を返却
    * サイトドメイン
    * PHPVersion
    * WordPressVersion
end note
jobLambda -> batch ++ : ジョブ群の起動（非同期）
cron <- jobLambda - -
@enduml

@startuml
title ジョブ登録

participant "Cron管理\n(CloudWatch)" as cron
participant "ジョブ設定Lambda" as jobLambda
participant "バッチサーバー" as batch
participant "バッチ設定テーブル\n(Dynamo)" as batchSeting

cron -> jobLambda ++ : ジョブ実行開始要求\n(１時間ごと)
jobLambda  -> batchSeting ++ : 実行するべきジョブの取得
batchSeting -> batchSeting : 日時より一覧を検索
jobLambda <- batchSeting - - : 実行する一覧を返却
rnote right of jobLambda #Yellow
    １サイト毎に以下の情報を返却
    * サイトドメイン
    * PHPVersion
    * WordPressVersion
end note
jobLambda -> batch ++ : ジョブ群の起動（非同期）
cron <- jobLambda - -
@enduml

PlantUML version 1.2022.14beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>