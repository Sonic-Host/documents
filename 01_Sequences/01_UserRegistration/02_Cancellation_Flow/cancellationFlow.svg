<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="918px" preserveAspectRatio="none" style="width:592px;height:918px;background:#FFFFFF;" version="1.1" viewBox="0 0 592 918" width="592px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="90" x="252.5" y="27.9951">サービス解約</text><rect fill="#FFFFFF" height="678.6563" style="stroke:#181818;stroke-width:1.0;" width="10" x="209" y="149.7266"/><rect fill="#FFFFFF" height="179.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="363" y="526.1875"/><rect fill="none" height="65.3984" style="stroke:#000000;stroke-width:1.5;" width="218" x="368" y="541.1875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="29" x2="29" y1="118.5938" y2="837.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="213.5" x2="213.5" y1="118.5938" y2="837.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="367.5" x2="367.5" y1="118.5938" y2="837.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="508.5" x2="508.5" y1="118.5938" y2="837.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="115.292">ユーザ</text><ellipse cx="29" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M29,58.7969 L29,85.7969 M16,66.7969 L42,66.7969 M29,85.7969 L16,100.7969 M29,85.7969 L42,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="5" y="849.3779">ユーザ</text><ellipse cx="29" cy="861.1797" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M29,869.1797 L29,896.1797 M16,877.1797 L42,877.1797 M29,896.1797 L16,911.1797 M29,896.1797 L42,911.1797 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="150.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="158" y="90.9951">クライアント端末</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="157.5" y="107.292">(PCまたはスマホ)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="150.5" y="836.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="158" y="856.3779">クライアント端末</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="157.5" y="872.6748">(PCまたはスマホ)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="292.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="318.5" y="90.9951">SonicHost API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="299.5" y="107.292">(CDN/API-Gateway)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151" x="292.5" y="836.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="318.5" y="856.3779">SonicHost API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="299.5" y="872.6748">(CDN/API-Gateway)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="468.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="481" y="90.9951">認証基盤</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="475.5" y="107.292">(Cognito)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="468.5" y="836.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="481" y="856.3779">認証基盤</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="475.5" y="872.6748">(Cognito)</text><rect fill="#FFFFFF" height="678.6563" style="stroke:#181818;stroke-width:1.0;" width="10" x="209" y="149.7266"/><rect fill="#FFFFFF" height="179.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="363" y="526.1875"/><polygon fill="#181818" points="197,145.7266,207,149.7266,197,153.7266,201,149.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="149.7266" y2="149.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="36" y="144.6606">HOME画面表示</text><rect fill="#ADFF2F" height="23" style="stroke:#181818;stroke-width:0.5;" width="138" x="224" y="162.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="228" y="178.7935">ログインフローを参照</text><polygon fill="#181818" points="197,207.9922,207,211.9922,197,215.9922,201,211.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="211.9922" y2="211.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="36" y="206.9263">ユーザアイコン押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="261" y1="241.125" y2="241.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="241.125" y2="254.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="220" x2="261" y1="254.125" y2="254.125"/><polygon fill="#181818" points="230,250.125,220,254.125,230,258.125,226,254.125" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="226" y="236.0591">ユーザメニューを表示</text><polygon fill="#181818" points="197,279.2578,207,283.2578,197,287.2578,201,283.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="283.2578" y2="283.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="36" y="278.1919">登録状況を押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="261" y1="312.3906" y2="312.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="312.3906" y2="325.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="220" x2="261" y1="325.3906" y2="325.3906"/><polygon fill="#181818" points="230,321.3906,220,325.3906,230,329.3906,226,325.3906" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="226" y="307.3247">登録状況画面表示</text><polygon fill="#181818" points="197,350.5234,207,354.5234,197,358.5234,201,354.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="354.5234" y2="354.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="36" y="349.4575">解約押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="261" y1="383.6563" y2="383.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="383.6563" y2="396.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="220" x2="261" y1="396.6563" y2="396.6563"/><polygon fill="#181818" points="230,392.6563,220,396.6563,230,400.6563,226,396.6563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="226" y="378.5903">解約画面表示</text><polygon fill="#181818" points="197,421.7891,207,425.7891,197,429.7891,201,425.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="425.7891" y2="425.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="36" y="420.7231">解約押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="261" y1="454.9219" y2="454.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="454.9219" y2="467.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="220" x2="261" y1="467.9219" y2="467.9219"/><polygon fill="#181818" points="230,463.9219,220,467.9219,230,471.9219,226,467.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="226" y="449.856">解約注意画面表示</text><polygon fill="#181818" points="197,493.0547,207,497.0547,197,501.0547,201,497.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="497.0547" y2="497.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="36" y="491.9888">「確認した上で解約」押下</text><polygon fill="#181818" points="351,522.1875,361,526.1875,351,530.1875,355,526.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="357" y1="526.1875" y2="526.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="226" y="521.1216">解約API</text><path d="M368,541.1875 L446,541.1875 L446,548.3203 L436,558.3203 L368,558.3203 L368,541.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="65.3984" style="stroke:#000000;stroke-width:1.5;" width="218" x="368" y="541.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="33" x="383" y="554.2544">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="461" y="553.3979">[登録サイト毎にループ]</text><rect fill="#FEFFDD" height="38" style="stroke:#181818;stroke-width:0.5;" width="132" x="378" y="563.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="382" y="579.3872">サイト削除フローの</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="382" y="594.52">サイト削除APIを参考</text><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="415" y1="634.7188" y2="634.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="415" x2="415" y1="634.7188" y2="647.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="374" x2="415" y1="647.7188" y2="647.7188"/><polygon fill="#181818" points="384,643.7188,374,647.7188,384,651.7188,380,647.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="380" y="629.6528">ユーザ登録情報削除</text><polygon fill="#181818" points="497,687.9844,507,691.9844,497,695.9844,501,691.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="373" x2="503" y1="691.9844" y2="691.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="380" y="671.7856">ユーザ削除</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="380" y="686.9185">(トークン無効化)</text><polygon fill="#181818" points="230,701.9844,220,705.9844,230,709.9844,226,705.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="224" x2="367" y1="705.9844" y2="705.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="261" y1="735.1172" y2="735.1172"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="735.1172" y2="748.1172"/><line style="stroke:#181818;stroke-width:1.0;" x1="220" x2="261" y1="748.1172" y2="748.1172"/><polygon fill="#181818" points="230,744.1172,220,748.1172,230,752.1172,226,748.1172" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="226" y="730.0513">解約完了画面表示</text><polygon fill="#181818" points="197,773.25,207,777.25,197,781.25,201,777.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="29" x2="203" y1="777.25" y2="777.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="36" y="772.1841">「確認完了」押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="219" x2="261" y1="806.3828" y2="806.3828"/><line style="stroke:#181818;stroke-width:1.0;" x1="261" x2="261" y1="806.3828" y2="819.3828"/><line style="stroke:#181818;stroke-width:1.0;" x1="220" x2="261" y1="819.3828" y2="819.3828"/><polygon fill="#181818" points="230,815.3828,220,819.3828,230,823.3828,226,819.3828" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="226" y="801.3169">ログイン画面表示</text><!--MD5=[8fcbf66782ec9516827004b95cac8b98]
@startuml
title サービス解約

' アクター定義
actor "ユーザ" as user
participant "クライアント端末\n(PCまたはスマホ)" as device
participant "SonicHost API\n(CDN/API-Gateway)" as api
participant "認証基盤\n(Cognito)" as cognito


user -> device ++: HOME画面表示
rnote right of device #GreenYellow
    ログインフローを参照
end note
user -> device : ユーザアイコン押下
device -> device : ユーザメニューを表示
user -> device : 登録状況を押下
device -> device : 登録状況画面表示
user -> device : 解約押下
device -> device : 解約画面表示
user -> device : 解約押下
device -> device : 解約注意画面表示
user -> device : 「確認した上で解約」押下
device -> api ++ : 解約API
loop 登録サイト毎にループ
    rnote right of api
        サイト削除フローの
        サイト削除APIを参考
    end note
end
api -> api : ユーザ登録情報削除
api -> cognito : ユーザ削除\n(トークン無効化)
device <- api - -
device -> device : 解約完了画面表示
user -> device : 「確認完了」押下
device -> device : ログイン画面表示
@enduml

@startuml
title サービス解約

actor "ユーザ" as user
participant "クライアント端末\n(PCまたはスマホ)" as device
participant "SonicHost API\n(CDN/API-Gateway)" as api
participant "認証基盤\n(Cognito)" as cognito


user -> device ++: HOME画面表示
rnote right of device #GreenYellow
    ログインフローを参照
end note
user -> device : ユーザアイコン押下
device -> device : ユーザメニューを表示
user -> device : 登録状況を押下
device -> device : 登録状況画面表示
user -> device : 解約押下
device -> device : 解約画面表示
user -> device : 解約押下
device -> device : 解約注意画面表示
user -> device : 「確認した上で解約」押下
device -> api ++ : 解約API
loop 登録サイト毎にループ
    rnote right of api
        サイト削除フローの
        サイト削除APIを参考
    end note
end
api -> api : ユーザ登録情報削除
api -> cognito : ユーザ削除\n(トークン無効化)
device <- api - -
device -> device : 解約完了画面表示
user -> device : 「確認完了」押下
device -> device : ログイン画面表示
@enduml

PlantUML version 1.2022.14beta4(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>