<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="3297px" preserveAspectRatio="none" style="width:1075px;height:3297px;background:#FFFFFF;" version="1.1" viewBox="0 0 1075 3297" width="1075px" zoomAndPan="magnify"><defs/><g><rect height="26.2969" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="115" x="479" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="484" y="27.9951">会員登録フロー</text><rect fill="#FFFFFF" height="3072.8203" style="stroke:#181818;stroke-width:1.0;" width="10" x="224" y="134.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="417" y="163.7266"/><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="251.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="382.7891"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="470.1875"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="557.5859"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="776.6484"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="958.4453"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="1060.9766"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="614" y="660.1172"/><rect fill="#FFFFFF" height="156.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="614" y="1231.7734"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="614" y="1417.4375"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="724.5" y="689.25"/><rect fill="#FFFFFF" height="113.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1245.7734"/><rect fill="#FFFFFF" height="56.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1546.9688"/><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1632.2344"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1789.8984"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1877.2969"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1991.6953"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="2468.8203"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="2627.1563"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="3071.0156"/><rect height="277.3281" style="stroke:#000000;stroke-width:1.5;fill:none;" width="557.5" x="10" y="862.9141"/><rect height="448.5313" style="stroke:#000000;stroke-width:1.5;fill:none;" width="903.5" x="10" y="2330.1563"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="44" x2="44" y1="118.5938" y2="3216.4141"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="228.5" x2="228.5" y1="118.5938" y2="3216.4141"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="421.5" x2="421.5" y1="118.5938" y2="3216.4141"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="516.5" x2="516.5" y1="118.5938" y2="3216.4141"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="618.5" x2="618.5" y1="118.5938" y2="3216.4141"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="729.5" x2="729.5" y1="118.5938" y2="3216.4141"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="845.5" x2="845.5" y1="118.5938" y2="3216.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="20" y="115.292">ユーザ</text><ellipse cx="44" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M44,58.7969 L44,85.7969 M31,66.7969 L57,66.7969 M44,85.7969 L31,100.7969 M44,85.7969 L57,100.7969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="20" y="3228.4092">ユーザ</text><ellipse cx="44" cy="3240.2109" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M44,3248.2109 L44,3275.2109 M31,3256.2109 L57,3256.2109 M44,3275.2109 L31,3290.2109 M44,3275.2109 L57,3290.2109 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="165.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="173" y="90.9951">クライアント端末</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="172.5" y="107.292">(PCまたはスマホ)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="127" x="165.5" y="3215.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="173" y="3235.4092">クライアント端末</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113" x="172.5" y="3251.7061">(PCまたはスマホ)</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="377.5" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="384.5" y="107.292">Webサーバ</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="377.5" y="3215.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="384.5" y="3235.4092">Webサーバ</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="476.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="489" y="90.9951">認証基盤</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="483.5" y="107.292">(Cognito)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="81" x="476.5" y="3215.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="489" y="3235.4092">認証基盤</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67" x="483.5" y="3251.7061">(Cognito)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="567.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="603.5" y="90.9951">CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="574.5" y="107.292">(CloudFront)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="103" x="567.5" y="3215.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="603.5" y="3235.4092">CDN</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89" x="574.5" y="3251.7061">(CloudFront)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="680.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="687.5" y="90.9951">SPA資材格納</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="715.5" y="107.292">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="98" x="680.5" y="3215.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="84" x="687.5" y="3235.4092">SPA資材格納</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="715.5" y="3251.7061">(S3)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="788.5" y="71"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="796.5" y="90.9951">SonicHost API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="795.5" y="107.292">(API-Gateway)</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="115" x="788.5" y="3215.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="99" x="796.5" y="3235.4092">SonicHost API</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="795.5" y="3251.7061">(API-Gateway)</text><rect fill="#FFFFFF" height="3072.8203" style="stroke:#181818;stroke-width:1.0;" width="10" x="224" y="134.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="417" y="163.7266"/><rect fill="#FFFFFF" height="44.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="251.125"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="382.7891"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="470.1875"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="557.5859"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="776.6484"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="958.4453"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="512" y="1060.9766"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="614" y="660.1172"/><rect fill="#FFFFFF" height="156.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="614" y="1231.7734"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="614" y="1417.4375"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="724.5" y="689.25"/><rect fill="#FFFFFF" height="113.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1245.7734"/><rect fill="#FFFFFF" height="56.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1546.9688"/><rect fill="#FFFFFF" height="86.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1632.2344"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1789.8984"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1877.2969"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="1991.6953"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="2468.8203"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="2627.1563"/><rect fill="#FFFFFF" height="14" style="stroke:#181818;stroke-width:1.0;" width="10" x="841" y="3071.0156"/><polygon fill="#181818" points="212,130.5938,222,134.5938,212,138.5938,216,134.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="134.5938" y2="134.5938"/><polygon fill="#181818" points="405,159.7266,415,163.7266,405,167.7266,409,163.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="411" y1="163.7266" y2="163.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="241" y="158.6606">サイト参照</text><polygon fill="#181818" points="245,188.8594,235,192.8594,245,196.8594,241,192.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="421" y1="192.8594" y2="192.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="251" y="187.7935">サイト表示</text><polygon fill="#181818" points="212,217.9922,222,221.9922,212,225.9922,216,221.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="221.9922" y2="221.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="216.9263">「登録」押下</text><polygon fill="#181818" points="500,247.125,510,251.125,500,255.125,504,251.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="251.125" y2="251.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="241" y="246.0591">ユーザ登録画面要求</text><polygon fill="#181818" points="245,291.3906,235,295.3906,245,299.3906,241,295.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="516" y1="295.3906" y2="295.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="251" y="275.1919">登録画面表示</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="251" y="290.3247">メールアドレス入力画面</text><polygon fill="#181818" points="212,320.5234,222,324.5234,212,328.5234,216,324.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="324.5234" y2="324.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="51" y="319.4575">メールアドレス入力</text><polygon fill="#181818" points="212,349.6563,222,353.6563,212,357.6563,216,353.6563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="353.6563" y2="353.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="51" y="348.5903">「メール送信」押下</text><polygon fill="#181818" points="500,378.7891,510,382.7891,500,386.7891,504,382.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="382.7891" y2="382.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="241" y="377.7231">メール送信依頼</text><polygon fill="#181818" points="245,407.9219,235,411.9219,245,415.9219,241,411.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="516" y1="411.9219" y2="411.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="251" y="406.856">メール送信</text><polygon fill="#181818" points="212,437.0547,222,441.0547,212,445.0547,216,441.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="441.0547" y2="441.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="51" y="435.9888">メール承認</text><polygon fill="#181818" points="500,466.1875,510,470.1875,500,474.1875,504,470.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="470.1875" y2="470.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="241" y="465.1216">承認によるリダイレクト</text><polygon fill="#181818" points="245,495.3203,235,499.3203,245,503.3203,241,499.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="516" y1="499.3203" y2="499.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="251" y="494.2544">ユーザ名・パスワード入力画面表示</text><polygon fill="#181818" points="212,524.4531,222,528.4531,212,532.4531,216,528.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="528.4531" y2="528.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="51" y="523.3872">ユーザ名・パスワード入力</text><polygon fill="#181818" points="500,553.5859,510,557.5859,500,561.5859,504,557.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="557.5859" y2="557.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="241" y="552.52">ユーザ名・パスワード登録依頼</text><polygon fill="#181818" points="55,582.7188,45,586.7188,55,590.7188,51,586.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="49" x2="516" y1="586.7188" y2="586.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="61" y="581.6528">登録完了画面</text><polygon fill="#181818" points="212,611.8516,222,615.8516,212,619.8516,216,615.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="615.8516" y2="615.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="51" y="610.7856">「早速使ってみる」を押下</text><polygon fill="#181818" points="602,656.1172,612,660.1172,602,664.1172,606,660.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="608" y1="660.1172" y2="660.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="241" y="639.9185">SPA資材（React）要求</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="241" y="655.0513">管理画面資材要求</text><polygon fill="#181818" points="712.5,685.25,722.5,689.25,712.5,693.25,716.5,689.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="624" x2="718.5" y1="689.25" y2="689.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="631" y="684.1841">SPA資材要求</text><polygon fill="#181818" points="635,714.3828,625,718.3828,635,722.3828,631,718.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="629" x2="728.5" y1="718.3828" y2="718.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="641" y="713.3169">SPA資材</text><polygon fill="#181818" points="245,743.5156,235,747.5156,245,751.5156,241,747.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="618" y1="747.5156" y2="747.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="251" y="742.4497">管理画面表示</text><polygon fill="#181818" points="500,772.6484,510,776.6484,500,780.6484,504,776.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="776.6484" y2="776.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="241" y="771.5825">トークン用公開鍵要求</text><polygon fill="#181818" points="245,801.7813,235,805.7813,245,809.7813,241,805.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="516" y1="805.7813" y2="805.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="251" y="800.7153">公開鍵</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="834.9141" y2="834.9141"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="834.9141" y2="847.9141"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="847.9141" y2="847.9141"/><polygon fill="#181818" points="245,843.9141,235,847.9141,245,851.9141,241,847.9141" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="241" y="829.8481">トークンチェック</text><path d="M10,862.9141 L76,862.9141 L76,870.0469 L66,880.0469 L10,880.0469 L10,862.9141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="277.3281" style="stroke:#000000;stroke-width:1.5;" width="557.5" x="10" y="862.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="875.981">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="120" x="91" y="875.1245">[トークンチェック失敗]</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="901.1797" y2="901.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="901.1797" y2="914.1797"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="914.1797" y2="914.1797"/><polygon fill="#181818" points="245,910.1797,235,914.1797,245,918.1797,241,914.1797" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="241" y="896.1138">ログイン画面</text><polygon fill="#181818" points="500,954.4453,510,958.4453,500,962.4453,504,958.4453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="958.4453" y2="958.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="241" y="938.2466">ログイン確立要求</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="241" y="953.3794">(Initiate Auth)</text><polygon fill="#181818" points="245,983.5781,235,987.5781,245,991.5781,241,987.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="516" y1="987.5781" y2="987.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="251" y="982.5122">session等</text><polygon fill="#181818" points="212,1012.7109,222,1016.7109,212,1020.7109,216,1016.7109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="1016.7109" y2="1016.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="51" y="1011.645">ユーザ名・パスワード入力</text><polygon fill="#181818" points="500,1056.9766,510,1060.9766,500,1064.9766,504,1060.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="506" y1="1060.9766" y2="1060.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="241" y="1040.7778">認証(トークン発行依頼)</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="241" y="1055.9106">(Responed to Auth Challenge)</text><polygon fill="#181818" points="245,1086.1094,235,1090.1094,245,1094.1094,241,1090.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="516" y1="1090.1094" y2="1090.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="251" y="1085.0435">トークン</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="1119.2422" y2="1119.2422"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="1119.2422" y2="1132.2422"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="1132.2422" y2="1132.2422"/><polygon fill="#181818" points="245,1128.2422,235,1132.2422,245,1136.2422,241,1132.2422" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="241" y="1114.1763">トークンチェック</text><rect fill="#87CEEB" height="53" style="stroke:#181818;stroke-width:0.5;" width="445" x="624" y="1152.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281" x="628" y="1168.3091">CORS回避のため、API打鍵はCloudFrontを通す</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="344" x="628" y="1183.4419">また、API-GWでCognitoのトークンチェックも実施する。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="437" x="628" y="1198.5747">1つだけ丁寧に記載するが、以降はトークンチェック等のシーケンスを省略</text><polygon fill="#181818" points="602,1227.7734,612,1231.7734,602,1235.7734,606,1231.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="608" y1="1231.7734" y2="1231.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="241" y="1226.7075">規約更新チェックAPI</text><polygon fill="#181818" points="829,1241.7734,839,1245.7734,829,1249.7734,833,1245.7734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="624" x2="835" y1="1245.7734" y2="1245.7734"/><line style="stroke:#181818;stroke-width:1.0;" x1="851" x2="893" y1="1274.9063" y2="1274.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="893" x2="893" y1="1274.9063" y2="1287.9063"/><line style="stroke:#181818;stroke-width:1.0;" x1="852" x2="893" y1="1287.9063" y2="1287.9063"/><polygon fill="#181818" points="862,1283.9063,852,1287.9063,862,1291.9063,858,1287.9063" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="858" y="1269.8403">トークンチェック</text><line style="stroke:#181818;stroke-width:1.0;" x1="851" x2="893" y1="1332.1719" y2="1332.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="893" x2="893" y1="1332.1719" y2="1345.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="852" x2="893" y1="1345.1719" y2="1345.1719"/><polygon fill="#181818" points="862,1341.1719,852,1345.1719,862,1349.1719,858,1345.1719" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="858" y="1311.9731">ユーザの規約</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="858" y="1327.106">更新状況チェック</text><polygon fill="#181818" points="635,1355.1719,625,1359.1719,635,1363.1719,631,1359.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="629" x2="845" y1="1359.1719" y2="1359.1719"/><polygon fill="#181818" points="245,1384.3047,235,1388.3047,245,1392.3047,241,1388.3047" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="618" y1="1388.3047" y2="1388.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="251" y="1383.2388">規約未確認</text><polygon fill="#181818" points="602,1413.4375,612,1417.4375,602,1421.4375,606,1417.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="608" y1="1417.4375" y2="1417.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="241" y="1412.3716">規約情報取得API</text><polygon fill="#181818" points="245,1442.5703,235,1446.5703,245,1450.5703,241,1446.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="618" y1="1446.5703" y2="1446.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="251" y="1441.5044">規約</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="1475.7031" y2="1475.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="1475.7031" y2="1488.7031"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="1488.7031" y2="1488.7031"/><polygon fill="#181818" points="245,1484.7031,235,1488.7031,245,1492.7031,241,1488.7031" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="241" y="1470.6372">規約同意画面</text><polygon fill="#181818" points="212,1513.8359,222,1517.8359,212,1521.8359,216,1517.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="1517.8359" y2="1517.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="51" y="1512.77">規約同意</text><polygon fill="#181818" points="829,1542.9688,839,1546.9688,829,1550.9688,833,1546.9688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="1546.9688" y2="1546.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="241" y="1541.9028">規約同意日時更新API</text><line style="stroke:#181818;stroke-width:1.0;" x1="851" x2="893" y1="1576.1016" y2="1576.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="893" x2="893" y1="1576.1016" y2="1589.1016"/><line style="stroke:#181818;stroke-width:1.0;" x1="852" x2="893" y1="1589.1016" y2="1589.1016"/><polygon fill="#181818" points="862,1585.1016,852,1589.1016,862,1593.1016,858,1589.1016" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="858" y="1571.0356">規約同意日時更新</text><polygon fill="#181818" points="245,1599.1016,235,1603.1016,245,1607.1016,241,1603.1016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="1603.1016" y2="1603.1016"/><polygon fill="#181818" points="829,1628.2344,839,1632.2344,829,1636.2344,833,1632.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="1632.2344" y2="1632.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="241" y="1627.1685">サイト情報取得API</text><line style="stroke:#181818;stroke-width:1.0;" x1="851" x2="893" y1="1676.5" y2="1676.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="893" x2="893" y1="1676.5" y2="1689.5"/><line style="stroke:#181818;stroke-width:1.0;" x1="852" x2="893" y1="1689.5" y2="1689.5"/><polygon fill="#181818" points="862,1685.5,852,1689.5,862,1693.5,858,1689.5" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="858" y="1656.3013">ユーザのサイト</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="858" y="1671.4341">情報チェック</text><polygon fill="#181818" points="245,1714.6328,235,1718.6328,245,1722.6328,241,1718.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="1718.6328" y2="1718.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="251" y="1713.5669">サイト・決済登録情報なし</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="1747.7656" y2="1747.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="1747.7656" y2="1760.7656"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="1760.7656" y2="1760.7656"/><polygon fill="#181818" points="245,1756.7656,235,1760.7656,245,1764.7656,241,1760.7656" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="241" y="1742.6997">プラン選択画面表示</text><polygon fill="#181818" points="829,1785.8984,839,1789.8984,829,1793.8984,833,1789.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="1789.8984" y2="1789.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="241" y="1784.8325">プラン情報取得API</text><polygon fill="#181818" points="245,1815.0313,235,1819.0313,245,1823.0313,241,1819.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="1819.0313" y2="1819.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="251" y="1813.9653">プラン情報</text><polygon fill="#181818" points="212,1844.1641,222,1848.1641,212,1852.1641,216,1848.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="1848.1641" y2="1848.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="51" y="1843.0981">プラン選択</text><polygon fill="#181818" points="829,1873.2969,839,1877.2969,829,1881.2969,833,1877.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="1877.2969" y2="1877.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="241" y="1872.231">プラン登録API</text><polygon fill="#181818" points="245,1887.2969,235,1891.2969,245,1895.2969,241,1891.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="1891.2969" y2="1891.2969"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="1920.4297" y2="1920.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="1920.4297" y2="1933.4297"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="1933.4297" y2="1933.4297"/><polygon fill="#181818" points="245,1929.4297,235,1933.4297,245,1937.4297,241,1933.4297" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167" x="241" y="1915.3638">カード登録画面表示：Stripe</text><polygon fill="#181818" points="212,1958.5625,222,1962.5625,212,1966.5625,216,1962.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="1962.5625" y2="1962.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="51" y="1957.4966">カード情報入力</text><polygon fill="#181818" points="829,1987.6953,839,1991.6953,829,1995.6953,833,1991.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="1991.6953" y2="1991.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="241" y="1986.6294">stripeAPI</text><polygon fill="#181818" points="245,2001.6953,235,2005.6953,245,2009.6953,241,2005.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="2005.6953" y2="2005.6953"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2034.8281" y2="2034.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2034.8281" y2="2047.8281"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2047.8281" y2="2047.8281"/><polygon fill="#181818" points="245,2043.8281,235,2047.8281,245,2051.8281,241,2047.8281" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="241" y="2029.7622">登録完了画面表示</text><polygon fill="#181818" points="212,2072.9609,222,2076.9609,212,2080.9609,216,2076.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2076.9609" y2="2076.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="51" y="2071.895">「サイト情報登録」押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2106.0938" y2="2106.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2106.0938" y2="2119.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2119.0938" y2="2119.0938"/><polygon fill="#181818" points="245,2115.0938,235,2119.0938,245,2123.0938,241,2119.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="241" y="2101.0278">サイト名入力画面表示</text><polygon fill="#181818" points="212,2144.2266,222,2148.2266,212,2152.2266,216,2148.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2148.2266" y2="2148.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="2143.1606">サイト名入力</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2177.3594" y2="2177.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2177.3594" y2="2190.3594"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2190.3594" y2="2190.3594"/><polygon fill="#181818" points="245,2186.3594,235,2190.3594,245,2194.3594,241,2190.3594" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="241" y="2172.2935">ドメイン方式選択画面表示</text><path d="M239,2203.3594 L239,2288.3594 L481,2288.3594 L481,2213.3594 L471,2203.3594 L239,2203.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M471,2203.3594 L471,2213.3594 L481,2213.3594 L471,2203.3594 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="245" y="2220.4263">ドメイン方式は以下から選択</text><ellipse cx="250.5" cy="2231.125" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="258" y="2235.5591">自分で取得したドメイン</text><ellipse cx="250.5" cy="2246.2578" fill="#000000" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="258" y="2250.6919">Sonic Host提供のサブドメイン</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="245" y="2265.8247">金額かえる？</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="245" y="2280.9575">なら、カード入力のタイミング考慮要</text><polygon fill="#181818" points="212,2311.1563,222,2315.1563,212,2319.1563,216,2315.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2315.1563" y2="2315.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="51" y="2310.0903">ドメイン方式選択</text><path d="M10,2330.1563 L76,2330.1563 L76,2337.2891 L66,2347.2891 L10,2347.2891 L10,2330.1563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="448.5313" style="stroke:#000000;stroke-width:1.5;" width="903.5" x="10" y="2330.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="2343.2231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131" x="91" y="2342.3667">[自前ドメイン方式の場合]</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2368.4219" y2="2368.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2368.4219" y2="2381.4219"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2381.4219" y2="2381.4219"/><polygon fill="#181818" points="245,2377.4219,235,2381.4219,245,2385.4219,241,2381.4219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="241" y="2363.356">ドメイン入力画面表示</text><polygon fill="#181818" points="212,2406.5547,222,2410.5547,212,2414.5547,216,2410.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2410.5547" y2="2410.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="51" y="2405.4888">ドメイン名入力</text><polygon fill="#181818" points="212,2435.6875,222,2439.6875,212,2443.6875,216,2439.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2439.6875" y2="2439.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="2434.6216">「確定」押下</text><polygon fill="#181818" points="829,2464.8203,839,2468.8203,829,2472.8203,833,2468.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="2468.8203" y2="2468.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="241" y="2463.7544">ドメイン仮登録API</text><polygon fill="#181818" points="245,2478.8203,235,2482.8203,245,2486.8203,241,2482.8203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="2482.8203" y2="2482.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2511.9531" y2="2511.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2511.9531" y2="2524.9531"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2524.9531" y2="2524.9531"/><polygon fill="#181818" points="245,2520.9531,235,2524.9531,245,2528.9531,241,2524.9531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="241" y="2506.8872">ネームサーバ表示画面</text><polygon fill="#181818" points="212,2550.0859,222,2554.0859,212,2558.0859,216,2554.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2554.0859" y2="2554.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="51" y="2549.02">確認</text><polygon fill="#181818" points="212,2579.2188,222,2583.2188,212,2587.2188,216,2583.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2583.2188" y2="2583.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="2578.1528">「次へ」押下</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="913.5" y1="2592.2188" y2="2592.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203" x="15" y="2602.4292">[Sonic Hostサブドメイン方式の場合]</text><polygon fill="#181818" points="829,2623.1563,839,2627.1563,829,2631.1563,833,2627.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="2627.1563" y2="2627.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="241" y="2622.0903">ドメイン一覧取得API</text><polygon fill="#181818" points="245,2637.1563,235,2641.1563,245,2645.1563,241,2641.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="2641.1563" y2="2641.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2670.2891" y2="2670.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2670.2891" y2="2683.2891"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2683.2891" y2="2683.2891"/><polygon fill="#181818" points="245,2679.2891,235,2683.2891,245,2687.2891,241,2683.2891" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="241" y="2665.2231">ドメイン選択・入力画面表示</text><polygon fill="#181818" points="212,2708.4219,222,2712.4219,212,2716.4219,216,2712.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2712.4219" y2="2712.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="2707.356">ドメイン選択</text><polygon fill="#181818" points="212,2737.5547,222,2741.5547,212,2745.5547,216,2741.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2741.5547" y2="2741.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="51" y="2736.4888">サブドメイン入力</text><polygon fill="#181818" points="212,2766.6875,222,2770.6875,212,2774.6875,216,2770.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2770.6875" y2="2770.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="2765.6216">「次へ」押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2806.8203" y2="2806.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2806.8203" y2="2819.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2819.8203" y2="2819.8203"/><polygon fill="#181818" points="245,2815.8203,235,2819.8203,245,2823.8203,241,2819.8203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="241" y="2801.7544">サブドメインズ入力画面</text><polygon fill="#181818" points="212,2844.9531,222,2848.9531,212,2852.9531,216,2848.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2848.9531" y2="2848.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="51" y="2843.8872">サイトドメイン入力</text><polygon fill="#181818" points="212,2874.0859,222,2878.0859,212,2882.0859,216,2878.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2878.0859" y2="2878.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="51" y="2873.02">メールドメイン入力</text><polygon fill="#181818" points="212,2903.2188,222,2907.2188,212,2911.2188,216,2907.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="2907.2188" y2="2907.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="2902.1528">「確認」押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="2936.3516" y2="2936.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="2936.3516" y2="2949.3516"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="2949.3516" y2="2949.3516"/><polygon fill="#181818" points="245,2945.3516,235,2949.3516,245,2953.3516,241,2949.3516" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="241" y="2931.2856">入力内容確認画面表示</text><rect fill="#87CEEB" height="53" style="stroke:#181818;stroke-width:0.5;" width="294" x="239" y="2962.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="286" x="243" y="2978.4185">変更したい項目があれば「変更」ボタンを押下。</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="243" y="2993.5513">外套の変更画面に遷移し、「確認」ボタンを</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="243" y="3008.6841">押下すると今の画面に戻る</text><polygon fill="#181818" points="212,3037.8828,222,3041.8828,212,3045.8828,216,3041.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="3041.8828" y2="3041.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="51" y="3036.8169">「確定」押下</text><polygon fill="#181818" points="829,3067.0156,839,3071.0156,829,3075.0156,833,3071.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="835" y1="3071.0156" y2="3071.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="111" x="241" y="3065.9497">サイト情報更新API</text><polygon fill="#181818" points="245,3081.0156,235,3085.0156,245,3089.0156,241,3085.0156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="239" x2="845" y1="3085.0156" y2="3085.0156"/><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="3114.1484" y2="3114.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="3114.1484" y2="3127.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="3127.1484" y2="3127.1484"/><polygon fill="#181818" points="245,3123.1484,235,3127.1484,245,3131.1484,241,3127.1484" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="241" y="3109.0825">Welcome画面表示</text><polygon fill="#181818" points="212,3152.2813,222,3156.2813,212,3160.2813,216,3156.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="44" x2="218" y1="3156.2813" y2="3156.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="51" y="3151.2153">「Homeへ進む」押下</text><line style="stroke:#181818;stroke-width:1.0;" x1="234" x2="276" y1="3185.4141" y2="3185.4141"/><line style="stroke:#181818;stroke-width:1.0;" x1="276" x2="276" y1="3185.4141" y2="3198.4141"/><line style="stroke:#181818;stroke-width:1.0;" x1="235" x2="276" y1="3198.4141" y2="3198.4141"/><polygon fill="#181818" points="245,3194.4141,235,3198.4141,245,3202.4141,241,3198.4141" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="241" y="3180.3481">HOME画面表示</text><!--MD5=[6b6a8755ee2c1e1cc0e0f7545de85a33]
@startuml
title 会員登録フロー

' アクター定義
actor "ユーザ" as user
participant "クライアント端末\n(PCまたはスマホ)" as device
participant "Webサーバ" as site
participant "認証基盤\n(Cognito)" as cognito
participant "CDN\n(CloudFront)" as cdn
participant "SPA資材格納\n(S3)" as spa
participant "SonicHost API\n(API-Gateway)" as api


' シーケンス
' Webサイト編
user -> device ++ 
device -> site ++ : サイト参照
device <- - site - - : サイト表示
user -> device : 「登録」押下

' Cognito登録編（ユーザ登録）
device -> cognito ++ : ユーザ登録画面要求
device <- - cognito - - : 登録画面表示\nメールアドレス入力画面
user -> device : メールアドレス入力
user -> device : 「メール送信」押下
device -> cognito ++ : メール送信依頼
device <- - cognito - - : メール送信
user -> device : メール承認
device -> cognito ++ : 承認によるリダイレクト
device <- - cognito - - : ユーザ名・パスワード入力画面表示
user -> device :ユーザ名・パスワード入力
device -> cognito ++ : ユーザ名・パスワード登録依頼
user <- - cognito - - : 登録完了画面
user -> device : 「早速使ってみる」を押下

' 管理画面取得編
device -> cdn ++ : SPA資材（React）要求\n管理画面資材要求 
cdn -> spa ++ : SPA資材要求
cdn <- - spa - - : SPA資材
device <- - cdn - - : 管理画面表示
device -> cognito ++ : トークン用公開鍵要求
device <- - cognito - - : 公開鍵
device -> device : トークンチェック
alt トークンチェック失敗
    device -> device : ログイン画面
    device -> cognito ++ : ログイン確立要求\n(Initiate Auth)
    device <- - cognito - - : session等
    user -> device : ユーザ名・パスワード入力
    device -> cognito ++ : 認証(トークン発行依頼)\n(Responed to Auth Challenge)
    device <- - cognito - - : トークン
    device -> device : トークンチェック
end

' APIとのやりとり編
rnote right of cdn #SkyBlue
    CORS回避のため、API打鍵はCloudFrontを通す
    また、API-GWでCognitoのトークンチェックも実施する。
    1つだけ丁寧に記載するが、以降はトークンチェック等のシーケンスを省略
end note
device -> cdn ++ : 規約更新チェックAPI
cdn -> api ++ 
api -> api : トークンチェック
api -> api : ユーザの規約\n更新状況チェック
cdn <- - api - -
device <- - cdn - - : 規約未確認
device -> cdn ++ : 規約情報取得API
device <- - cdn - - : 規約
device -> device : 規約同意画面
user -> device : 規約同意
device -> api ++ : 規約同意日時更新API
api -> api : 規約同意日時更新
device <- - api - - 
device -> api ++ : サイト情報取得API
api -> api : ユーザのサイト\n情報チェック
device <- - api - - : サイト・決済登録情報なし

device -> device : プラン選択画面表示
device -> api ++ : プラン情報取得API
device <- - api - - : プラン情報
user -> device : プラン選択
device -> api ++ : プラン登録API
device <- - api - - 
device -> device : カード登録画面表示：Stripe
user -> device : カード情報入力
device -> api ++ : stripeAPI
device <- - api - - 
device -> device : 登録完了画面表示
user -> device : 「サイト情報登録」押下
device -> device : サイト名入力画面表示
user -> device : サイト名入力
device -> device : ドメイン方式選択画面表示
note right of device 
    ドメイン方式は以下から選択
    * 自分で取得したドメイン
    * Sonic Host提供のサブドメイン
    金額かえる？
    なら、カード入力のタイミング考慮要
end note
user -> device : ドメイン方式選択
alt 自前ドメイン方式の場合
    device -> device :ドメイン入力画面表示
    user -> device : ドメイン名入力
    user -> device : 「確定」押下
    device -> api ++ : ドメイン仮登録API
    device <- - api - - 
    device -> device : ネームサーバ表示画面
    user -> device : 確認
    user -> device : 「次へ」押下
else Sonic Hostサブドメイン方式の場合
    device -> api ++ : ドメイン一覧取得API
    device <- - api - - 
    device -> device : ドメイン選択・入力画面表示
    user -> device : ドメイン選択
    user -> device : サブドメイン入力
    user -> device : 「次へ」押下
end 
device -> device : サブドメインズ入力画面
user -> device : サイトドメイン入力
user -> device : メールドメイン入力
user -> device : 「確認」押下
device -> device : 入力内容確認画面表示
rnote right of device #SkyBlue
    変更したい項目があれば「変更」ボタンを押下。
    外套の変更画面に遷移し、「確認」ボタンを
    押下すると今の画面に戻る
end note
user -> device : 「確定」押下
device -> api ++ : サイト情報更新API
device <- - api - - 
device -> device : Welcome画面表示
user -> device : 「Homeへ進む」押下
device -> device : HOME画面表示
@enduml

@startuml
title 会員登録フロー

actor "ユーザ" as user
participant "クライアント端末\n(PCまたはスマホ)" as device
participant "Webサーバ" as site
participant "認証基盤\n(Cognito)" as cognito
participant "CDN\n(CloudFront)" as cdn
participant "SPA資材格納\n(S3)" as spa
participant "SonicHost API\n(API-Gateway)" as api


user -> device ++ 
device -> site ++ : サイト参照
device <- - site - - : サイト表示
user -> device : 「登録」押下

device -> cognito ++ : ユーザ登録画面要求
device <- - cognito - - : 登録画面表示\nメールアドレス入力画面
user -> device : メールアドレス入力
user -> device : 「メール送信」押下
device -> cognito ++ : メール送信依頼
device <- - cognito - - : メール送信
user -> device : メール承認
device -> cognito ++ : 承認によるリダイレクト
device <- - cognito - - : ユーザ名・パスワード入力画面表示
user -> device :ユーザ名・パスワード入力
device -> cognito ++ : ユーザ名・パスワード登録依頼
user <- - cognito - - : 登録完了画面
user -> device : 「早速使ってみる」を押下

device -> cdn ++ : SPA資材（React）要求\n管理画面資材要求 
cdn -> spa ++ : SPA資材要求
cdn <- - spa - - : SPA資材
device <- - cdn - - : 管理画面表示
device -> cognito ++ : トークン用公開鍵要求
device <- - cognito - - : 公開鍵
device -> device : トークンチェック
alt トークンチェック失敗
    device -> device : ログイン画面
    device -> cognito ++ : ログイン確立要求\n(Initiate Auth)
    device <- - cognito - - : session等
    user -> device : ユーザ名・パスワード入力
    device -> cognito ++ : 認証(トークン発行依頼)\n(Responed to Auth Challenge)
    device <- - cognito - - : トークン
    device -> device : トークンチェック
end

rnote right of cdn #SkyBlue
    CORS回避のため、API打鍵はCloudFrontを通す
    また、API-GWでCognitoのトークンチェックも実施する。
    1つだけ丁寧に記載するが、以降はトークンチェック等のシーケンスを省略
end note
device -> cdn ++ : 規約更新チェックAPI
cdn -> api ++ 
api -> api : トークンチェック
api -> api : ユーザの規約\n更新状況チェック
cdn <- - api - -
device <- - cdn - - : 規約未確認
device -> cdn ++ : 規約情報取得API
device <- - cdn - - : 規約
device -> device : 規約同意画面
user -> device : 規約同意
device -> api ++ : 規約同意日時更新API
api -> api : 規約同意日時更新
device <- - api - - 
device -> api ++ : サイト情報取得API
api -> api : ユーザのサイト\n情報チェック
device <- - api - - : サイト・決済登録情報なし

device -> device : プラン選択画面表示
device -> api ++ : プラン情報取得API
device <- - api - - : プラン情報
user -> device : プラン選択
device -> api ++ : プラン登録API
device <- - api - - 
device -> device : カード登録画面表示：Stripe
user -> device : カード情報入力
device -> api ++ : stripeAPI
device <- - api - - 
device -> device : 登録完了画面表示
user -> device : 「サイト情報登録」押下
device -> device : サイト名入力画面表示
user -> device : サイト名入力
device -> device : ドメイン方式選択画面表示
note right of device 
    ドメイン方式は以下から選択
    * 自分で取得したドメイン
    * Sonic Host提供のサブドメイン
    金額かえる？
    なら、カード入力のタイミング考慮要
end note
user -> device : ドメイン方式選択
alt 自前ドメイン方式の場合
    device -> device :ドメイン入力画面表示
    user -> device : ドメイン名入力
    user -> device : 「確定」押下
    device -> api ++ : ドメイン仮登録API
    device <- - api - - 
    device -> device : ネームサーバ表示画面
    user -> device : 確認
    user -> device : 「次へ」押下
else Sonic Hostサブドメイン方式の場合
    device -> api ++ : ドメイン一覧取得API
    device <- - api - - 
    device -> device : ドメイン選択・入力画面表示
    user -> device : ドメイン選択
    user -> device : サブドメイン入力
    user -> device : 「次へ」押下
end 
device -> device : サブドメインズ入力画面
user -> device : サイトドメイン入力
user -> device : メールドメイン入力
user -> device : 「確認」押下
device -> device : 入力内容確認画面表示
rnote right of device #SkyBlue
    変更したい項目があれば「変更」ボタンを押下。
    外套の変更画面に遷移し、「確認」ボタンを
    押下すると今の画面に戻る
end note
user -> device : 「確定」押下
device -> api ++ : サイト情報更新API
device <- - api - - 
device -> device : Welcome画面表示
user -> device : 「Homeへ進む」押下
device -> device : HOME画面表示
@enduml

PlantUML version 1.2022.6beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>